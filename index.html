<html>
  <head>
    <title>SpirographJS by Paul</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body
    style="
      background-color: antiquewhite;
      font-family: 'Courier New', Courier, monospace;
      margin: auto;
      padding: 5%;
    "
  >
    <h1>SpirographJS by Paul</h1>
    <p>
      Di ko rin alam kung bakit pero putangina bat ang saya ng math na
      nacocoiyocc
    </p>
    <canvas id="spirographCanvas" width="1000" height="1000"></canvas>
    <div class="slidecontainer">
      <input
        type="range"
        min="0"
        max="1000"
        value="50"
        class="slider"
        id="myRange"
      />
      <p>Value: <span id="demo"></span></p>
    </div>
  </body>
</html>

<script>
  var slider = document.getElementById("myRange");
  var output = document.getElementById("demo");
  output.innerHTML = slider.value; // Display the default slider value

  // Update the current slider value (each time you drag the slider handle)
  slider.oninput = function () {
    output.innerHTML = this.value;
    ratio = this.value;
    main();
  };

  var canvas = document.getElementById("spirographCanvas");
  var context = canvas.getContext("2d");
  var ratio = slider.value;
  var circle_big_r = 200;
  let circle_small_r = 90;
  var centerx = canvas.width / 2;
  var centery = canvas.height / 2;
  var starting_point = null;
  var revolutions = 3;
  var theta = 0;

  function ready() {
    context.clearRect(0, 0, canvas.width, canvas.height);
    canvas = canvas
    context = context
    ratio = slider.value;
    circle_big_r = circle_big_r
    circle_small_r = circle_small_r
    centerx = canvas.width / 2;
    centery = canvas.height / 2;
    starting_point = null;
    revolutions = revolutions;
    theta = 0;

    context.beginPath();
    context.lineWidth = 2;
    context.strokeStyle = "grey";
    circle_big = context.arc(
      centerx,
      centery,
      circle_big_r,
      0,
      Math.PI * 2,
      false
    );
    context.stroke();
    context.moveTo(centerx + circle_big_r, centery);
    context.beginPath();
    context.strokeStyle = "powderblue";
    circle_small = context.arc(
      centerx + circle_big_r,
      centery,
      circle_small_r,
      0,
      Math.PI * 2,
      false
    );
    context.stroke();

    context.beginPath();
    var x = centerx + circle_big_r + circle_small_r;
    var y = centery;
    context.moveTo(x, y);
    context.strokeStyle = "hsl(200, 40%, 50%)";
    context.lineWidth = 1;
  }

  function drawSpirograph() {
    if (theta <= Math.PI * 2 * revolutions) {
      x = centerx + Math.cos(theta) * circle_big_r + Math.cos(theta* ratio) * circle_small_r;
      y = centery + Math.sin(theta) * circle_big_r + Math.sin(theta* ratio) * circle_small_r;
      context.lineTo(x, y);
      context.stroke();
      theta += 0.01;
    }
    setTimeout(() => {requestAnimationFrame(drawSpirograph);}, 0);
  }

  function main() {
    ready();
    drawSpirograph();
  }
</script>
